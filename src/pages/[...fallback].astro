---
import { CollectionEntry, getCollection } from "astro:content";
import { normalizeSlug, removeLangFromSlug } from "../lib/i18n/slugModify";

export async function getStaticPaths() {
	const allPages = await getCollection("docs")
	return allPages.map((page) => {
		let slug = normalizeSlug(page.slug);
		return {
			params: { fallback: removeLangFromSlug(slug) },
			props: { slug }
		}
	})
}

export type Props = CollectionEntry<'docs'>;

const { slug } = Astro.props;
import i18nConfig from "../../astro.i18n.config";
const defaultLangCode = i18nConfig;
---

<script is:inline>
  // Redirect your homepage to the first page of documentation.
  // If you have a landing page, remove this script and add it here!
  window.location.pathname = `${defaultLangCode}/${slug}`;
</script>